<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Fashion Recommender 2.0</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
</head>
<body>
<div class="container">
    <h1>Smart Fashion Recommender 2.0</h1>
    <p>Advanced interactive recommender system with multiple algorithms and analytics.</p>

    <!-- DATA LOAD -->
    <div class="section">
        <h3>Data Loading</h3>
        <button id="auto-load-btn">Auto-Load Data from GitHub</button>
        <div class="upload-group">
            <label>Upload Users CSV: <input type="file" id="upload-users" class="upload-btn" disabled></label>
            <label>Upload Items CSV: <input type="file" id="upload-items" class="upload-btn" disabled></label>
            <label>Upload Interactions CSV: <input type="file" id="upload-interactions" class="upload-btn" disabled></label>
            <label>Upload Item Embeddings JSON: <input type="file" id="upload-embeddings" class="upload-btn" disabled></label>
        </div>
    </div>

    <!-- FILTERS -->
    <div class="section">
        <h3>Filter Users & Items</h3>
        <div id="location-buttons" class="button-group"></div>
        <div id="location-note" class="note"></div>
        <label>Select User:</label>
        <select id="user-select"></select>
        <label>Select Item:</label>
        <select id="item-select"></select>
    </div>

    <!-- PURCHASE HISTORY -->
    <div class="section">
        <h3>Purchase History of Selected Item</h3>
        <table id="history-table">
            <thead>
            <tr>
                <th>User_ID</th>
                <th>Item</th>
                <th>Rating</th>
                <th>Price</th>
                <th>Timestamp</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- TOP-10 GLOBAL RECOMMENDATIONS -->
    <div class="section">
        <h3>Top-10 Recommendations (Global)</h3>
        <button id="compute-top10-btn">Compute Top-10</button>
        <table id="recommendation-table">
            <thead>
            <tr>
                <th>Rank</th>
                <th>ID_Item</th>
                <th>Name</th>
                <th>Rating</th>
                <th>Price</th>
                <th>Score</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- CONTENT-BASED ITEM RECOMMENDER -->
    <div class="section">
        <h3>Content-Based Item Recommender</h3>
        <label>Select Item you like:</label>
        <select id="content-item-select"></select>
        <button id="content-recommend-btn">Find Similar Items</button>
        <table id="content-table">
            <thead>
            <tr><th>Rank</th><th>ID_Item</th><th>Name</th><th>Score</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- MATRIX FACTORIZATION (COLLAB FILTER) -->
    <div class="section">
        <h3>Matrix Factorization Collaborative Filtering Recommender</h3>
        <label>Select User:</label>
        <select id="mf-user-select"></select>
        <label>Select Item:</label>
        <select id="mf-item-select"></select>
        <button id="mf-train-btn">Train Model</button>
        <div id="mf-status" class="note"></div>
        <button id="mf-predict-btn">Predict Rating</button>
        <div id="mf-predict-note" class="note"></div>
    </div>

    <!-- TWO-TOWER ITEM RECOMMENDER -->
    <div class="section">
        <h3>Two-Tower Item Recommender</h3>
        <button id="tt-load-btn">Load Data</button>
        <button id="tt-train-btn">Train</button>
        <button id="tt-test-btn">Test</button>
        <div id="tt-status" class="note"></div>
        <canvas id="tt-loss-chart" width="600" height="300"></canvas>
        <div id="tt-embedding-proj" class="note">Embedding projection will appear here</div>
        <div id="tt-tables">
            <div class="tt-table">
                <h4>Historical Top-10</h4>
                <table id="tt-hist-table"><thead><tr><th>Rank</th><th>Item</th><th>Name</th><th>Rating</th></tr></thead><tbody></tbody></table>
            </div>
            <div class="tt-table">
                <h4>Basic Recommendations</h4>
                <table id="tt-basic-table"><thead><tr><th>Rank</th><th>Item</th><th>Name</th><th>Score</th></tr></thead><tbody></tbody></table>
            </div>
            <div class="tt-table">
                <h4>Two-Tower Recommendations</h4>
                <table id="tt-two-table"><thead><tr><th>Rank</th><th>Item</th><th>Name</th><th>Score</th></tr></thead><tbody></tbody></table>
            </div>
        </div>
    </div>

    <!-- EDA -->
    <div class="section">
        <h3>Rating & Price Distribution of Items</h3>
        <canvas id="eda-chart" width="800" height="400"></canvas>
    </div>

    <!-- CONNECTION WITH EDA -->
    <div class="section">
        <h3>Connection with EDA (Optional)</h3>
        <div id="eda-summary" class="note"></div>
    </div>

    <!-- STATUS -->
    <div id="status-note" class="note"></div>
</div>

<script src="app.js"></script>
</body>
</html>
